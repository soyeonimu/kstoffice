<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 기본 SEO -->
  <title>{{ page.title | default: site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description | default: '리더스 합동 법무사 사무소 - 검찰 수사관 출신 실무진, 형사·회생·등기·민사 솔루션' }}" />
  <link rel="canonical" href="{{ page.url | absolute_url }}" />

  <!-- 스타일 -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

  <!-- 공통 기본 스타일 -->
  <style>
    /* 하얀 화면 방지 및 기본 레이아웃 */
    body { margin: 0; padding: 0; font-family: 'Pretendard', -apple-system, sans-serif; background-color: #fff; color: #333; }
    main { min-height: 80vh; display: block; }

    /* 헤더 숨김 방지 기본 스타일 */
    .header--hidden { transform: translateY(-100%); transition: transform 0.3s ease; }

    /* 애니메이션 기본값 */
    .js-reveal { opacity: 0; transform: translateY(20px); transition: all 0.8s ease; }
    .js-reveal.is-visible { opacity: 1; transform: translateY(0); }
  </style>

  <!-- Open Graph / Kakao / Naver -->
  {% assign og_title = page.og_title | default: page.title | default: site.title %}
  {% assign og_desc  = page.og_description | default: page.description | default: site.description | default: '리더스 합동 법무사 사무소 - 검찰 수사관 출신 법무사 사무소' %}
  {% assign og_image = page.og_image | default: '/assets/img/logo/logo.png' %}

  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="리더스 합동 법무사 사무소" />
  <meta property="og:title" content="{{ og_title }}" />
  <meta property="og:description" content="{{ og_desc }}" />
  <meta property="og:url" content="{{ page.url | absolute_url }}" />
  <meta property="og:image" content="{{ page.og_image | default: '/assets/img/og/og-main.png' | absolute_url }}">
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ og_title }}" />
  <meta name="twitter:description" content="{{ og_desc }}" />
  <meta name="twitter:image" content="{{ page.og_image | default: '/assets/img/og/og-main.png' | absolute_url }}">
</head>

<body>

  {% include header.html %}

  <main>
    {{ content }}
  </main>

  {% include side-links.html %}
  {% include footer.html %}

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // 1) Reveal 효과
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('is-visible');
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.js-reveal').forEach(el => observer.observe(el));

      // 2) 헤더 스크롤 로직
      const header = document.getElementById('siteHeader');
      let lastY = window.scrollY;

      window.addEventListener('scroll', () => {
        if (!header) return;

        const currY = window.scrollY;
        if (currY > lastY + 10 && currY > 100) header.classList.add('header--hidden');
        else if (currY < lastY - 10) header.classList.remove('header--hidden');

        lastY = currY;
      }, { passive: true });
    });
  </script>
</body>
</html>
